## 一切都翻倍了吗

> - 请尝试解释一下程序的输出。
> - 请谈谈对`sizeof()`的理解吧。
> - 这道题目在32位系统和64位系统下运行的结果是不相同的，为什么呢？

```c
int main() {
   //32位系统和64位系统的输出为什么不一样
    int a[9] = {
        1, 2, 3, 4, 5, 6, 7, 8, 9,
    };
    printf("%lu\n", sizeof(a));
    printf("%lu\n", sizeof(a + 0));
    printf("%lu\n", sizeof(*a));
    printf("%lu\n", sizeof(a + 1));
    printf("%lu\n", sizeof(a[1]));
    printf("%lu\n", sizeof(&a));
    printf("%lu\n", sizeof(&a + 1));
    printf("%lu\n", sizeof(&a[0]));
    printf("%lu\n", sizeof(&a[0] + 1));
    printf("%lu\n", sizeof(*&a));
    return 0;
}
```

---

| 出题人  | 赵方圆                  |
| ------- | ------------------------ |
| 知识点1 | sizeof()运算符           |
| 知识点2 | 数组，指针存储方面的理解 |

### 现场问题

1. 程序直接运行，输出的内容是什么意思？
2. (64位)这里的sizeof(a)为什么和sizeof(a+0)的数值不相同?
3. sizeof()是不是函数？如果不是函数那是什么？sizeof()是在编译时计算还是运行时计算？
4. 64位和32位系统分别运行，哪些数据会改变？为什么？

### 答案
1. 
```c
    //64位
    sizeof(a)         = 36   // 一个整形四个字节，九个元素
    sizeof(a + 0)     = 8    // 首元素地址
    sizeof(*a)        = 4    // 首元素地址，*a解引用首元素大小
    sizeof(a + 1)     = 8    // 首元素地址加1还是地址
    sizeof(a[1])      = 4    // 数组第二个元素
    sizeof(&a)        = 8    // 整个数组地址
    sizeof(&a + 1)    = 8    // 指向下一个数组的地址
    sizeof(&a[0])     = 8    // 首元素地址
    sizeof(&a[0] + 1) = 8    // 第二个元素2的地址
    sizeof(*&a)       = 36   // &a整个数组地址 解引用为整个数组大小
```
2. 这里的a表示的是一个包含 9 个整数元素的数组。执行表达式 a + 0 时，a 会退化为指向数组。
3. sizeof()是一个用于获取数据类型或变量大小的操作符，用于在编译时确定大小信息，而不是运行时。
4. 在 32 位系统上，通常使用 32 位（4 字节）来表示内存地址,而在 64 位系统上，通常使用 64 位（8 字节）来表示内存地址。
```c
    //32位
    sizeof(a)         = 36   // 一个整形四个字节，九个元素
    sizeof(a + 0)     = 4    // 首元素地址
    sizeof(*a)        = 4    // 首元素地址，*a解引用首元素大小
    sizeof(a + 1)     = 4    // 首元素地址加1还是地址
    sizeof(a[1])      = 4    // 数组第二个元素
    sizeof(&a)        = 4    // 整个数组地址
    sizeof(&a + 1)    = 4    // 指向下一个数组的地址
    sizeof(&a[0])     = 4    // 首元素地址
    sizeof(&a[0] + 1) = 4    // 第二个元素2的地址
    sizeof(*&a)       = 36   // &a整个数组地址 解引用为整个数组大小
```
### 评分标准

A：能基本完整的回答上面所有问题,对应知识点也能基本回答上来

B：对问题1能回答基本正确，其他问题理解有偏差 问题1正确率低，但是其他问题基本正确 

C：仅仅知道sizeof()的作用,错误率高

D：只知道结果
